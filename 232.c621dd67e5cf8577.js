"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[232],{232:(pe,v,s)=>{s.r(v),s.d(v,{ViewModule:()=>ce});var d=s(9808),b=s(9525),w=s(1492),m=s(8966),e=s(4893),C=s(7423);let M=(()=>{class n{constructor(t,o){this.dialogRef=t,this.data=o}ngOnInit(){console.log(this.data)}borrar(){this.dialogRef.close(!0)}cerrar(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.so),e.Y36(m.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-delete"]],decls:12,vars:0,consts:[["mat-button","","color","warn",3,"click"],["mat-button","",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"h1"),e._uU(1,"\xbfEst\xe1 seguro?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p"),e._uU(4," Est\xe1 a punto de borrar Un registro. "),e._UZ(5,"br"),e._uU(6," \xbfDesea continuar?\n"),e.qZA(),e.TgZ(7,"div")(8,"button",0),e.NdJ("click",function(){return o.borrar()}),e._uU(9,"Si, Borrar!"),e.qZA(),e.TgZ(10,"button",1),e.NdJ("click",function(){return o.cerrar()}),e._uU(11,"Cancelar"),e.qZA()())},directives:[C.lW],encapsulation:2}),n})(),q=(()=>{class n{constructor(t,o){this.dialogRef=t,this.data=o}ngOnInit(){console.log(this.data)}borrar(){this.dialogRef.close(!0)}cerrar(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.so),e.Y36(m.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-delete"]],decls:12,vars:0,consts:[["mat-button","","color","warn",3,"click"],["mat-button","",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"h1"),e._uU(1,"\xbfEst\xe1 seguro?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p"),e._uU(4," Est\xe1 a punto de Editar un registro. "),e._UZ(5,"br"),e._uU(6," \xbfDesea continuar?\n"),e.qZA(),e.TgZ(7,"div")(8,"button",0),e.NdJ("click",function(){return o.borrar()}),e._uU(9,"Si, Editar!"),e.qZA(),e.TgZ(10,"button",1),e.NdJ("click",function(){return o.cerrar()}),e._uU(11,"Cancelar"),e.qZA()())},directives:[C.lW],encapsulation:2}),n})();var h=s(1557),P=s(7261),y=s(1319),x=s(773),l=s(2382),F=s(3745),Z=s(3170),u=s(508),_=(s(6866),s(7322)),f=s(6856);function N(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid start date"),e.qZA())}function R(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid end date"),e.qZA())}function J(n,a){if(1&n&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.name),e.xp6(1),e.Oqu(t.name)}}function O(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",25),e._UZ(1,"hr"),e.TgZ(2,"label",26),e._uU(3,"Empresas"),e.qZA(),e.TgZ(4,"select",27),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().contratista=r}),e.TgZ(5,"option",16),e._uU(6,"Todas"),e.qZA(),e.YNc(7,J,2,2,"option",28),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.contratista),e.xp6(3),e.Q6J("ngForOf",t.contratistas)}}function S(n,a){1&n&&(e.TgZ(0,"div",30),e._UZ(1,"mat-spinner"),e.TgZ(2,"h4"),e._uU(3,"Cargando ..."),e.qZA()())}let T=(()=>{class n{constructor(t,o,r){this.mainService=t,this._adapter=o,this._locale=r,this.registrosFiltrados=new e.vpe,this.isAdmin=!1,this.isMandante=!1,this.loading=!1,this.termino="",this.contratistas=[{id:"",name:""}],this.range=new l.cw({start:new l.NI,end:new l.NI}),this.filtrar=()=>{let i,p;this.loading=!0,this.range.value.end?(p=Math.abs(this.range.value.start._d-this.range.value.end._d)/864e5,i=new Date(this.range.value.end._d).toISOString().split("T",1).toString()):i="";const c={fecha:i,intervalo:p,name:this.isName(),rut:this.isRut(),temp:this.temperatura,turno:this.turno,contratista:this.contratista};this.mainService.getPass(c).subscribe(g=>{this.loading=!1,this.registrosFiltrados.emit(g)})}}ngOnInit(){"ADM"===sessionStorage.getItem("role")&&(this.isAdmin=!0),"USM"===sessionStorage.getItem("role")&&(this.isMandante=!0),(this.isAdmin||this.isMandante)&&this.mainService.getAllCompany().subscribe(t=>this.contratistas=t)}isName(){if(""!==this.termino.trim()){const t=this.termino.trim().substring(0,this.termino.length-1);return isNaN(t.trim())?this.termino:""}return""}isRut(){if(""!==this.termino.trim()){const t=this.termino.trim().substring(0,this.termino.length-1);return isNaN(t.trim())?"":this.termino}return""}descargarReporte(){let t,o;this.loading=!0,this.range.value.end?(o=Math.abs(this.range.value.start._d-this.range.value.end._d)/864e5,t=new Date(this.range.value.end._d).toISOString().split("T",1).toString()):t="";const r={fecha:t,intervalo:o,name:this.isName(),rut:this.isRut(),temp:this.temperatura,turno:this.turno,contratista:this.contratista,role:sessionStorage.getItem("role")};this.mainService.descargarReportePasadas(r).subscribe(i=>{this.mainService.descargarRepPasadas(i.Filename).subscribe(p=>{},p=>{const c=document.createElement("a");c.href=p.url,c.setAttribute("download",p.Filename),document.body.appendChild(c),c.click(),this.loading=!1})},i=>{this.mainService.descargarRepPasadas(i.Filename).subscribe(p=>{},p=>{const c=document.createElement("a");c.href=p.url,c.setAttribute("download",p.Filename),document.body.appendChild(c),c.click(),this.loading=!1})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.J),e.Y36(u._A),e.Y36(u.Ad))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-filter"]],outputs:{registrosFiltrados:"registrosFiltrados"},features:[e._Bn([{provide:u.Ad,useValue:"es-ES"},{provide:u._A,useClass:Z.t7,deps:[u.Ad,Z.o8]},{provide:u.sG,useValue:Z.$o}])],decls:53,vars:10,consts:[[1,"filter"],[1,"m-0"],[1,"d-flex","flex-column","mb-2"],["for","busqueda"],[1,"d-flex"],["name","termino","id","busqueda","type","text","placeholder","Ingresa el termino de busqueda",1,"input-text","w-100","mr-2",3,"ngModel","ngModelChange"],["for",""],["appearance","fill",1,"w-100"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["for","turno"],["aria-label","Default select example","id","turno","name","turno",1,"form-select",3,"ngModel","ngModelChange"],["value","all","selected",""],["value","1"],["value","2"],["value","3"],["for","temperatura"],["aria-label","Default select example","id","temperatura","name","temperatura",1,"form-select",3,"ngModel","ngModelChange"],["class","",4,"ngIf"],["type","button",1,"btn","btn-primary","w-100","mx-0",3,"click"],["class","alert mt-5 pt-5 text-center d-flex align-items-center flex-column","role","alert",4,"ngIf"],[1,""],["for","empresa"],["aria-label","Default select example","id","empresa","name","contratista",1,"form-select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["role","alert",1,"alert","mt-5","pt-5","text-center","d-flex","align-items-center","flex-column"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0)(1,"h4",1),e._uU(2,"Filtros"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Busca por nombre o por rut"),e.qZA(),e.TgZ(7,"div",4)(8,"input",5),e.NdJ("ngModelChange",function(i){return o.termino=i}),e.qZA()()(),e._UZ(9,"hr"),e.TgZ(10,"label",6),e._uU(11,"Registros por fecha"),e.qZA(),e.TgZ(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Ingresa el rango de fecha"),e.qZA(),e.TgZ(15,"mat-date-range-input",8),e._UZ(16,"input",9)(17,"input",10),e.qZA(),e.TgZ(18,"mat-hint"),e._uU(19,"DD/MM/YYYY"),e.qZA(),e._UZ(20,"mat-datepicker-toggle",11)(21,"mat-date-range-picker",null,12),e.YNc(23,N,2,0,"mat-error",13),e.YNc(24,R,2,0,"mat-error",13),e.qZA(),e._UZ(25,"hr"),e.TgZ(26,"label",14),e._uU(27,"Tipo Turno"),e.qZA(),e.TgZ(28,"select",15),e.NdJ("ngModelChange",function(i){return o.turno=i}),e.TgZ(29,"option",16),e._uU(30,"Todos"),e.qZA(),e.TgZ(31,"option",17),e._uU(32,"Entrada"),e.qZA(),e.TgZ(33,"option",18),e._uU(34,"Salida"),e.qZA(),e.TgZ(35,"option",19),e._uU(36,"No se sabe"),e.qZA()(),e._UZ(37,"hr"),e.TgZ(38,"label",20),e._uU(39,"Temperatura"),e.qZA(),e.TgZ(40,"select",21),e.NdJ("ngModelChange",function(i){return o.temperatura=i}),e.TgZ(41,"option",16),e._uU(42,"Todas"),e.qZA(),e.TgZ(43,"option",17),e._uU(44,"Normal"),e.qZA(),e.TgZ(45,"option",18),e._uU(46,"Alta"),e.qZA()(),e.YNc(47,O,8,2,"div",22),e.TgZ(48,"button",23),e.NdJ("click",function(){return o.filtrar()}),e._uU(49,"Filtrar"),e.qZA(),e.TgZ(50,"button",23),e.NdJ("click",function(){return o.descargarReporte()}),e._uU(51,"Descargar Reporte"),e.qZA()(),e.YNc(52,S,4,0,"div",24)),2&t){const r=e.MAs(22);e.xp6(8),e.Q6J("ngModel",o.termino),e.xp6(7),e.Q6J("formGroup",o.range)("rangePicker",r),e.xp6(5),e.Q6J("for",r),e.xp6(3),e.Q6J("ngIf",null==o.range.controls||null==o.range.controls.start?null:o.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",null==o.range.controls||null==o.range.controls.end?null:o.range.controls.end.hasError("matEndDateInvalid")),e.xp6(4),e.Q6J("ngModel",o.turno),e.xp6(12),e.Q6J("ngModel",o.temperatura),e.xp6(7),e.Q6J("ngIf",o.isAdmin||o.isMandante),e.xp6(5),e.Q6J("ngIf",o.loading)}},directives:[l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,_.KE,_.hX,f.wx,l.sg,f.zY,l.u,f.By,_.bx,f.nW,_.R9,f._g,d.O5,_.TO,l.EJ,l.YN,l.Kr,d.sg,x.Ou],styles:["[_ngcontent-%COMP%]::placeholder{color:gray!important;font-size:.8rem}"]}),n})(),A=(()=>{class n{transform(t,...o){const r=t.substring(t.length-1,0),i=t.slice(t.length-1);let p,c,g;return 8==r.length?(p=r.slice(r.length-3),c=r.substring(2,5),g=r.slice(0,2)):(p=r.slice(r.length-3),c=r.substring(1,4),g=r[0]),`${g}.${c}.${p}-${i}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"rut",type:n,pure:!0}),n})(),U=(()=>{class n{transform(t,...o){let r;switch(t){case 1:r="Entrada";break;case 2:r="Salida";break;case 3:r="No se sabe"}return r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"tipoMarcada",type:n,pure:!0}),n})();function I(n,a){if(1&n&&(e.TgZ(0,"h5",24),e._uU(1," Temperatura: "),e.TgZ(2,"b"),e._uU(3),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.pass_temperature)}}function k(n,a){if(1&n&&(e.TgZ(0,"h5"),e._uU(1," Temperatura: "),e.TgZ(2,"b"),e._uU(3),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.pass_temperature)}}function E(n,a){if(1&n&&(e.TgZ(0,"div",13)(1,"h2",5)(2,"button",14)(3,"div",15)(4,"div",16)(5,"span",17)(6,"b"),e._uU(7),e.qZA()(),e._UZ(8,"hr"),e.TgZ(9,"span",17),e._uU(10),e.ALo(11,"date"),e.qZA()(),e.TgZ(12,"div",18),e._UZ(13,"img",19)(14,"img",19),e.qZA()()()(),e.TgZ(15,"div",20)(16,"div",21)(17,"h5"),e._uU(18,"Rut: "),e.TgZ(19,"b"),e._uU(20),e.ALo(21,"rut"),e.qZA()(),e.TgZ(22,"h5"),e._uU(23,"Tipo marcada: "),e.TgZ(24,"b"),e._uU(25),e.ALo(26,"tipoMarcada"),e.qZA()(),e.TgZ(27,"h5"),e._uU(28,"Turno efectivo:"),e.qZA(),e.YNc(29,I,4,1,"h5",22),e.YNc(30,k,4,1,"h5",23),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.uIk("data-bs-target","#aco"+t.id),e.xp6(5),e.Oqu(t.person_name),e.xp6(3),e.Oqu(e.xi3(11,10,t.pass_create_time,"short")),e.xp6(3),e.s9C("src",t.resource_url,e.LSH),e.xp6(1),e.MGl("src","http://173.249.58.215:9000",t.pass_img_url,"",e.LSH),e.xp6(1),e.uIk("id","aco"+t.id),e.xp6(5),e.Oqu(e.lcZ(21,13,t.person_no)),e.xp6(5),e.Oqu(e.lcZ(26,15,t.pass_direction)),e.xp6(4),e.Q6J("ngIf",t.pass_temperature>37.5),e.xp6(1),e.Q6J("ngIf",t.pass_temperature<=37.4)}}let Y=(()=>{class n{constructor(t){this.mainService=t,this.loading=!1}ngOnInit(){}recargar(){this.loading=!0,this.mainService.getPass(this.parametres).subscribe(t=>{t.map(o=>{o.resource_url=o.person_resource_url.includes("/u/cms/www/")?`http://173.249.58.215:9000${o.person_resource_url}`:`https://rpafactory.cl/sb_webapp/avatar/${o.person_resource_url}`}),this.registros=t,this.loading=!1})}filtrar(t){t.map(o=>{o.resource_url=o.person_resource_url.includes("/u/cms/www/")?`http://173.249.58.215:9000${o.person_resource_url}`:`https://rpafactory.cl/sb_webapp/avatar/${o.person_resource_url}`}),this.registros=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-responsivo"]],inputs:{registros:"registros",parametres:"parametres"},decls:17,vars:1,consts:[[1,"col-sm-12","col-md-12","col-lg-3","aside","mb-5"],[1,"btn","btn-primary","w-100","m-0","mb-3",3,"click"],[1,"fa-solid","fa-arrows-rotate"],["id","accordionExample",1,"accordion"],[1,"accordion-item"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],[1,"m-0","p-0",2,"color","#00395e"],[1,"fa-solid","fa-arrow-down-short-wide",2,"color","#00395e"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body"],[3,"registrosFiltrados"],["class","accordion-item mb-3",4,"ngFor","ngForOf"],[1,"accordion-item","mb-3"],["type","button","data-bs-toggle","collapse","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button","collapsed","p-2"],[1,"row"],[1,"col-6",2,"width","168.5px"],[2,"color","#00395e"],[1,"col-6","d-flex"],[1,"table-avatar",3,"src"],["aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"accordion-body","row"],["class","fiebre",4,"ngIf"],[4,"ngIf"],[1,"fiebre"]],template:function(t,o){1&t&&(e.TgZ(0,"aside",0)(1,"button",1),e.NdJ("click",function(){return o.recargar()}),e._UZ(2,"i",2),e._uU(3," Recargar "),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"h2",5)(7,"button",6)(8,"h1",7)(9,"b"),e._UZ(10,"i",8),e._uU(11," Filtros "),e.qZA()()()(),e.TgZ(12,"div",9)(13,"div",10)(14,"app-filter",11),e.NdJ("registrosFiltrados",function(i){return o.filtrar(i)}),e.qZA()()()()()(),e.TgZ(15,"div",3),e.YNc(16,E,31,17,"div",12),e.qZA()),2&t&&(e.xp6(16),e.Q6J("ngForOf",o.registros))},directives:[T,d.sg,d.O5],pipes:[d.uU,A,U],styles:[""]}),n})();var V=s(5227);function Q(n,a){1&n&&(e.TgZ(0,"div",12),e._UZ(1,"mat-spinner"),e.TgZ(2,"h4"),e._uU(3,"Cargando ..."),e.qZA()())}function $(n,a){1&n&&(e.TgZ(0,"th",15),e._uU(1,"Empresa"),e.qZA())}function D(n,a){1&n&&e._UZ(0,"th",15)}function L(n,a){if(1&n&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.group_name)}}function H(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"div",24)(2,"i",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).cargarDatosModal(r.person_no,r.pass_direction,r.id)}),e.qZA(),e.TgZ(3,"i",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).eliminar(r.id)}),e.qZA()()()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.uIk("data-bs-target","#modal"+t.id)}}function j(n,a){1&n&&e._UZ(0,"option",53),2&n&&e.s9C("value",a.$implicit.id_card)}function z(n,a){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" Nombre: ",t.person_name," ")}}function B(n,a){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" Nombre: ",t.NombreChange," ")}}function G(n,a){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" Empresa: ",t.group_name," ")}}function W(n,a){if(1&n&&(e.TgZ(0,"h5"),e._uU(1),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" Empresa: ",t.EmpresaChange," ")}}function X(n,a){if(1&n&&e._UZ(0,"img",49),2&n){const t=e.oxw(2).$implicit;e.MGl("src","http://173.249.58.215:9000",t.person_resource_url,"",e.LSH)}}function K(n,a){if(1&n&&e._UZ(0,"img",49),2&n){const t=e.oxw(4);e.s9C("src",t.AvatarChange,e.LSH)}}function ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"h3",31),e._uU(5," Editar Registro "),e.qZA(),e._UZ(6,"button",32),e.qZA(),e.TgZ(7,"div",33)(8,"div",2)(9,"div",34)(10,"h5"),e._uU(11),e.qZA(),e._UZ(12,"hr"),e.TgZ(13,"h5"),e._uU(14),e.ALo(15,"date"),e.qZA(),e._UZ(16,"hr"),e.TgZ(17,"div",35)(18,"h5",36),e._uU(19,"Rut:"),e.qZA(),e.TgZ(20,"input",37),e.NdJ("blur",function(){return e.CHM(t),e.oxw(3).changeRut()})("ngModelChange",function(r){return e.CHM(t),e.oxw(3).RutChange=r}),e.qZA(),e.TgZ(21,"datalist",38),e.YNc(22,j,1,1,"option",39),e.qZA()(),e._UZ(23,"hr"),e.YNc(24,z,2,1,"h5",20),e.YNc(25,B,2,1,"h5",20),e._UZ(26,"hr"),e.YNc(27,G,2,1,"h5",20),e.YNc(28,W,2,1,"h5",20),e._UZ(29,"hr"),e.TgZ(30,"div",35)(31,"h5",40),e._uU(32," Tipo de marcada: "),e.qZA(),e.TgZ(33,"select",41),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(3).turno=r}),e.TgZ(34,"option",42),e._uU(35,"Entrada"),e.qZA(),e.TgZ(36,"option",43),e._uU(37,"Salida"),e.qZA(),e.TgZ(38,"option",44),e._uU(39,"No se sabe"),e.qZA()()(),e._UZ(40,"hr"),e.qZA(),e.TgZ(41,"div",45)(42,"div",46)(43,"p"),e._uU(44,"Foto Avatar"),e.qZA(),e.YNc(45,X,1,1,"img",47),e.YNc(46,K,1,1,"img",47),e.qZA(),e.TgZ(47,"div",48)(48,"p"),e._uU(49,"Foto Registro"),e.qZA(),e._UZ(50,"img",49),e.qZA()()()(),e.TgZ(51,"div",50)(52,"button",51),e._uU(53," Cancelar "),e.qZA(),e.TgZ(54,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).editar()}),e._uU(55,"Editar registro"),e.qZA()()()()()}if(2&n){const t=e.oxw().$implicit,o=e.oxw(2);e.uIk("id","modal"+t.id),e.xp6(11),e.hij("Id: ",t.id,""),e.xp6(3),e.hij("Fecha: ",e.xi3(15,13,t.pass_create_time,"dd-MM-yyyy HH:mm:ss"),""),e.xp6(6),e.Q6J("ngModel",o.RutChange),e.xp6(2),e.Q6J("ngForOf",o.personas),e.xp6(2),e.Q6J("ngIf",""==o.NombreChange),e.xp6(1),e.Q6J("ngIf",""!=o.NombreChange),e.xp6(2),e.Q6J("ngIf",""==o.EmpresaChange),e.xp6(1),e.Q6J("ngIf",""!=o.EmpresaChange),e.xp6(5),e.Q6J("ngModel",o.turno),e.xp6(12),e.Q6J("ngIf",""==o.AvatarChange),e.xp6(1),e.Q6J("ngIf",""!=o.AvatarChange),e.xp6(4),e.MGl("src","http://173.249.58.215:9000",t.pass_img_url,"",e.LSH)}}const te=function(n){return{fiebre:n}};function ne(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"th",19),e._uU(2),e.ALo(3,"date"),e.qZA(),e.YNc(4,L,2,1,"td",20),e.TgZ(5,"td"),e._UZ(6,"img",21),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"img",21),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"rut"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"tipoMarcada"),e.qZA(),e.TgZ(17,"td",22),e._uU(18),e.qZA(),e.YNc(19,H,4,1,"td",20),e.YNc(20,ee,56,16,"div",23),e.qZA()),2&n){const t=a.$implicit,o=e.oxw(2);e.xp6(2),e.Oqu(e.xi3(3,11,t.pass_create_time,"dd-MM-yyyy HH:mm")),e.xp6(2),e.Q6J("ngIf",!o.isUser),e.xp6(2),e.s9C("src",t.resource_url,e.LSH),e.xp6(2),e.MGl("src","http://173.249.58.215:9000",t.pass_img_url,"",e.LSH),e.xp6(2),e.Oqu(t.person_name),e.xp6(2),e.Oqu(e.lcZ(13,14,t.person_no)),e.xp6(3),e.Oqu(e.lcZ(16,16,t.pass_direction)),e.xp6(2),e.Q6J("ngClass",e.VKq(18,te,t.pass_temperature>37.5)),e.xp6(1),e.hij(" ",t.pass_temperature," "),e.xp6(1),e.Q6J("ngIf",o.isAdmin),e.xp6(1),e.Q6J("ngIf",o.isAdmin)}}const oe=function(){return[5,10,25,100]};function re(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"table",14)(2,"thead",13)(3,"tr")(4,"th",15),e._uU(5,"Fecha"),e.qZA(),e.YNc(6,$,2,0,"th",16),e.TgZ(7,"th",15),e._uU(8,"Foto"),e.qZA(),e.TgZ(9,"th",15),e._uU(10,"Pasada"),e.qZA(),e.TgZ(11,"th",15),e._uU(12,"Nombre"),e.qZA(),e.TgZ(13,"th",15),e._uU(14,"Rut"),e.qZA(),e.TgZ(15,"th",15),e._uU(16,"Tipo"),e.qZA(),e.TgZ(17,"th",15),e._uU(18,"Temp"),e.qZA(),e.YNc(19,D,1,0,"th",16),e.qZA()(),e.TgZ(20,"tbody"),e.YNc(21,ne,21,20,"tr",17),e.ALo(22,"slice"),e.qZA()(),e.TgZ(23,"mat-paginator",18),e.NdJ("page",function(r){return e.CHM(t),e.oxw().cambiarPagina(r)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",!t.isUser),e.xp6(13),e.Q6J("ngIf",t.isAdmin),e.xp6(2),e.Q6J("ngForOf",e.Dn7(22,6,t.registros,t.start,t.end)),e.xp6(2),e.Q6J("length",t.registros.length)("pageSize",t.pageSize)("pageSizeOptions",e.DdM(10,oe))}}const ae=[{path:"",component:(()=>{class n{constructor(t,o,r){this.mainService=t,this.snackBar=o,this.dialog=r,this.EmpresaChange="",this.NombreChange="",this.AvatarChange="",this.RutChange="",this.IdChange="",this.turno="",this.Id=0,this.registros=[],this.esEditable=!1,this.loading=!1,this.isAdmin=!1,this.isManda=!1,this.isUser=!1,this.parametres={initDate:"",intervalo:365,name:"",rut:""},this.pageSize=10,this.start=0,this.end=this.pageSize,"ADM"==sessionStorage.getItem("role")&&(this.isAdmin=!0),"USM"==sessionStorage.getItem("role")&&(this.isManda=!0),"USC"==sessionStorage.getItem("role")&&(this.isUser=!0),this.recargar()}recargar(){this.loading=!0,this.mainService.getPass(this.parametres).subscribe(t=>{t.map(o=>{o.resource_url=o.person_resource_url.includes("/u/cms/www/")?`http://173.249.58.215:9000${o.person_resource_url}`:`https://rpafactory.cl/sb_webapp/avatar/${o.person_resource_url}`}),this.registros=t,this.loading=!1})}filtrar(t){t.map(o=>{o.resource_url=o.person_resource_url.includes("/u/cms/www/")?`http://173.249.58.215:9000${o.person_resource_url}`:`https://rpafactory.cl/sb_webapp/avatar/${o.person_resource_url}`}),this.registros=t}cambiarPagina(t){this.start=t.pageIndex*t.pageSize,this.end=this.start+t.pageSize}eliminar(t){this.dialog.open(M,{width:"400px"}).afterClosed().subscribe(r=>{r&&this.mainService.deleteRecords(t).subscribe(()=>{window.location.reload(),this.mostrarSnackbar("Registro eliminado","successSnackbar")})})}editar(){const t={id:this.Id,turno:this.turno,person_id:this.IdChange};console.log("\u{1f680} ~ file: view-page.component.ts ~ line 92 ~ ViewPageComponent ~ editar ~ data",t);const o=this.dialog.open(q,{width:"400px"});this.esEditable=!0,o.afterClosed().subscribe(r=>{r&&this.mainService.editarPasada(t).subscribe(i=>{console.log("\u{1f680} ~ file: view-page.component.ts ~ line 98 ~ ViewPageComponent ~ this.mainService.editarPasada ~ cliente",i),window.location.reload(),this.mostrarSnackbar("Registro Modificado ","successSnackbar")})})}mostrarSnackbar(t,o){this.snackBar.open(t,"Cerrar",{duration:3e3,panelClass:o})}changeRut(){(0,w.fW)(this.RutChange)?this.mainService.getPerson(this.RutChange).subscribe(t=>{console.log("\u{1f680} ~ file: view-page.component.ts ~ line 111 ~ ViewPageComponent ~ this.mainService.getPerson ~ res",t),this.AvatarChange=t.Person_find.avatar_url.includes("/u/cms/www/")?`https://rpafactory.cl/sb_webapp/avatar/${t.Person_find.avatar_url}`:`http://173.249.58.215:9000${t.Person_find.avatar_url}`,this.NombreChange=t.Person_find.person_name,this.EmpresaChange=t.Person_find.employee_name,this.IdChange=t.Person_find.person_no}):console.log("Rut invalido")}cargarDatosModal(t,o,r){this.mainService.getPersons(this.parametres).subscribe(i=>{this.personas=i}),this.Id=r,this.turno=o,this.RutChange=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.J),e.Y36(P.ux),e.Y36(m.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-page"]],decls:15,vars:4,consts:[[1,"container","my-3"],[1,"desktop"],[1,"row"],[1,"col-sm-12","col-md-12","col-lg-9","main"],["class","alert mt-5 pt-5 text-center d-flex align-items-center flex-column","role","alert",4,"ngIf"],["class","",4,"ngIf"],[1,"col-sm-12","col-md-12","col-lg-3","aside","mb-5"],[1,"btn","btn-primary","w-100","m-0","mb-3",3,"click"],[1,"fa-solid","fa-arrows-rotate"],[3,"registrosFiltrados"],[1,"responsivo"],[3,"registros","parametres"],["role","alert",1,"alert","mt-5","pt-5","text-center","d-flex","align-items-center","flex-column"],[1,""],[1,"table","table-hover","p-3","table-striped"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"length","pageSize","pageSizeOptions","page"],[1,"text-center"],[4,"ngIf"],[1,"table-avatar",3,"src"],[3,"ngClass"],["class","modal fade","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",4,"ngIf"],[1,"options","d-flex","flex-row"],["data-bs-toggle","modal",1,"fa-solid","fa-pen-to-square",3,"click"],[1,"fa-solid","fa-xmark",3,"click"],["tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"col-6","p-3"],[1,"d-flex","align-items-center"],["for","RutLabel",1,"form-label","mb-0",2,"margin-right","5px"],["type","text","list","RutOptions","id","RutLabel","name","RutChange",1,"form-control",3,"ngModel","blur","ngModelChange"],["id","RutOptions"],[3,"value",4,"ngFor","ngForOf"],["for","TipoPasada",1,"form-label","mb-0",2,"margin-right","5px"],["id","TipoPasada","aria-label","Default select example","name","turno",1,"form-select",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],[1,"col-6","d-flex","flex-row","border","row","p-3"],[1,"text-center","col-6","p-0","py-3","px-3","border-end"],["class","table rounded shadow",3,"src",4,"ngIf"],[1,"text-center","col-6","p-0","py-3","px-3"],[1,"table","rounded","shadow",3,"src"],[1,"modal-footer","d-flex","flex-row","w-100"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","px-5",2,"color","#00395e"],["type","button",1,"btn","btn-primary","px-5",3,"click"],[3,"value"]],template:function(t,o){1&t&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"main",3),e.YNc(5,Q,4,0,"div",4),e.YNc(6,re,24,11,"div",5),e.qZA(),e.TgZ(7,"aside",6)(8,"button",7),e.NdJ("click",function(){return o.recargar()}),e._UZ(9,"i",8),e._uU(10," Recargar "),e.qZA(),e.TgZ(11,"app-filter",9),e.NdJ("registrosFiltrados",function(i){return o.filtrar(i)}),e.qZA()()()(),e.TgZ(12,"div",10),e._UZ(13,"app-responsivo",11),e.qZA()(),e._UZ(14,"app-footer")),2&t&&(e.xp6(5),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",!o.loading),e.xp6(7),e.Q6J("registros",o.registros)("parametres",o.parametres))},directives:[y.S,d.O5,x.Ou,d.sg,d.mk,l.Fj,l.JJ,l.On,l.YN,l.Kr,l.EJ,F.NW,T,Y,V.c],pipes:[d.OU,d.uU,A,U],styles:["*[_ngcontent-%COMP%]{color:#00395e;font-size:.9rem}i[_ngcontent-%COMP%]{color:#fff;margin-right:5px}.main[_ngcontent-%COMP%]{overflow-x:auto}button[_ngcontent-%COMP%]{padding:10px 30%;display:flex;justify-content:space-around;align-items:center;color:#fff}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff}td[_ngcontent-%COMP%]{color:#00395e!important;font-weight:500}.fiebre[_ngcontent-%COMP%]{color:#d47077!important;font-weight:600!important}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;color:#00395e}.options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{transform:scale(1.2);transition:.5s}@media (max-width: 991px){main[_ngcontent-%COMP%]{order:2}aside[_ngcontent-%COMP%]{order:1}}@media (max-width: 991px){.desktop[_ngcontent-%COMP%]{display:none}.responsivo[_ngcontent-%COMP%]{display:block}}@media (min-width: 992px){.desktop[_ngcontent-%COMP%]{display:block}.responsivo[_ngcontent-%COMP%]{display:none}}"]}),n})()}];let ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[b.Bz.forChild(ae)],b.Bz]}),n})();var se=s(4466),le=s(7939);let ce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,ie,se.m,le.s,l.u5,l.UX]]}),n})()}}]);